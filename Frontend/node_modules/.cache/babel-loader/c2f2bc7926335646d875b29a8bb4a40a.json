{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ali/project_managment/Frontend/src/components/Expense.js\";\nimport React from 'react';\nimport apiClient from '../services/api'; //import ExpensesForm from './ExpensesForm';\n\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom'; //import PieChartComponent from './ChartJS';\n\nimport { Pagination } from 'react-bootstrap'; // import Categories from './Categories';\n\nclass Expense extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = props => {\n      this.fetchExpenses();\n      this.getChart();\n      this.setState({\n        filter: this.state.expenses\n      });\n    };\n\n    this.handleAddExpense = () => {\n      this.fetchExpenses();\n      this.getChart();\n    };\n\n    this.handleDeleteExpense = id => {\n      apiClient.get('/sanctum/csrf-cookie').then(response => {\n        apiClient.post('/api/deleteExpense', {\n          id: id\n        });\n        const expenses = this.state.expenses.filter(item => item.id !== id);\n        const filter = this.state.filter.filter(item => item.id !== id);\n        this.setState({\n          expenses: expenses,\n          filter: filter\n        });\n      });\n      this.getChart();\n    };\n\n    this.getChart = () => {\n      if (this.props.loggedIn) {\n        apiClient.get('sanctum/csrf-cookie').then(() => apiClient.get('/api/chartData').then(response => {\n          const data = response.data;\n          this.setState({\n            data: data\n          });\n        }).catch(error => console.error(error)));\n      }\n    };\n\n    this.handleAmountSort = () => {\n      if (this.state.sort == '(a, b) => a.amount > b.amount ? 1 : -1') {\n        this.setState({\n          sort: (a, b) => a.amount > b.amount ? -1 : 1\n        });\n      } else {\n        this.setState({\n          sort: (a, b) => a.amount > b.amount ? 1 : -1\n        });\n      }\n    };\n\n    this.handleDateSort = () => {\n      if (this.state.sort == '(a, b) => a.date > b.date ? 1 : -1') {\n        this.setState({\n          sort: (a, b) => a.date > b.date ? -1 : 1\n        });\n      } else {\n        this.setState({\n          sort: (a, b) => a.date > b.date ? 1 : -1\n        });\n      }\n    };\n\n    this.filterCatId = categories => {\n      let expenses = this.state.expenses;\n\n      if (categories == 0) {\n        expenses = this.state.expenses;\n      } else {\n        expenses = this.state.expenses.filter(item => item.category_id == categories);\n      }\n\n      this.setState({\n        filter: expenses\n      });\n    };\n\n    this.changeFrom = e => {\n      const from = e.target.value;\n      this.setState({\n        fromDate: from\n      });\n    };\n\n    this.changeTo = e => {\n      const to = e.target.value;\n      this.setState({\n        toDate: to\n      });\n    };\n\n    this.changeDate = () => {\n      if (this.state.fromDate && this.state.toDate) {\n        const expenses = this.state.expenses.filter(item => item.date >= this.state.fromDate && item.date <= this.state.toDate);\n        this.setState({\n          filter: expenses\n        });\n      }\n    };\n\n    this.resetExpenses = () => {\n      this.setState({\n        filter: this.state.expenses\n      });\n      this.setState({\n        fromDate: ''\n      });\n      this.setState({\n        toDate: ''\n      });\n    };\n\n    this.state = {\n      expenses: [],\n      data: [],\n      sort: (a, b) => a.id > b.id ? 1 : -1,\n      filter: [],\n      fromDate: '',\n      toDate: ''\n    };\n  }\n\n  fetchExpenses() {\n    if (this.props.loggedIn) {\n      apiClient.get('sanctum/csrf-cookie').then(() => apiClient.get('/api/expenses').then(response => {\n        const expenses = response.data.data;\n        this.setState({\n          expenses: expenses,\n          filter: expenses\n        });\n      }).catch(error => console.error(error)));\n    }\n  }\n\n  render() {\n    if (this.props.loggedIn) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow p-3 mb-5 bg-light rounded split left\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Filter By:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                align: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"From Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"To Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"form-control\",\n                    type: \"date\",\n                    onChange: this.changeFrom,\n                    value: this.state.fromDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"form-control\",\n                    type: \"date\",\n                    onChange: this.changeTo,\n                    value: this.state.toDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-dark\",\n                    type: \"submit\",\n                    onClick: this.changeDate,\n                    children: \"Filter\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-dark\",\n                    type: \"submit\",\n                    onClick: this.resetExpenses,\n                    children: \"Reset\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scroll\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped tableLeft\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"thead-dark\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"#\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    onClick: this.handleAmountSort,\n                    children: \"Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    onClick: this.handleDateSort,\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Action\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                className: \"\",\n                children: this.state.filter.sort(this.state.sort).map(expense => {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: expense.id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [expense.amount, \" $\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: expense.category.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: expense.date\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        to: {\n                          pathname: `/editExpense`,\n                          state: {\n                            eid: expense.id\n                          }\n                        },\n                        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                          width: \"2em\",\n                          height: \"2em\",\n                          viewBox: \"0 0 16 16\",\n                          class: \"bi bi-pencil-fill\",\n                          fill: \"currentColor\",\n                          xmlns: \"http://www.w3.org/2000/svg\",\n                          children: /*#__PURE__*/_jsxDEV(\"path\", {\n                            \"fill-rule\": \"evenodd\",\n                            d: \"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 193,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 192,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 191,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \" \\u2003  \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 194,\n                        columnNumber: 66\n                      }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                        width: \"2em\",\n                        height: \"2em\",\n                        viewBox: \"0 0 16 16\",\n                        className: \"bi bi-trash-fill\",\n                        fill: \"currentColor\",\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        onClick: e => {\n                          this.handleDeleteExpense(expense.id);\n                        },\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          fillRule: \"evenodd\",\n                          d: \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 196,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 49\n                    }, this)]\n                  }, expense.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 45\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow p-3 mb-5 bg-gradient-light rounded split right\",\n          height: \"100%\",\n          children: /*#__PURE__*/_jsxDEV(PieChartComponent, {\n            dataParentToChild: this.state.data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning\",\n      children: \"You are not logged in.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Expense;","map":{"version":3,"sources":["/home/ali/project_managment/Frontend/src/components/Expense.js"],"names":["React","apiClient","BrowserRouter","Router","Route","Link","Pagination","Expense","Component","constructor","props","componentDidMount","fetchExpenses","getChart","setState","filter","state","expenses","handleAddExpense","handleDeleteExpense","id","get","then","response","post","item","loggedIn","data","catch","error","console","handleAmountSort","sort","a","b","amount","handleDateSort","date","filterCatId","categories","category_id","changeFrom","e","from","target","value","fromDate","changeTo","to","toDate","changeDate","resetExpenses","render","map","expense","category","name","pathname","eid"],"mappings":"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","sourcesContent":["import React from 'react';\nimport apiClient from '../services/api';\n\n//import ExpensesForm from './ExpensesForm';\n\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\n\n//import PieChartComponent from './ChartJS';\nimport { Pagination } from 'react-bootstrap';\n// import Categories from './Categories';\n\nclass Expense extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            expenses: [],\n            data: [],\n            sort: (a, b) => a.id > b.id ? 1 : -1,\n            filter: [],\n            fromDate: '',\n            toDate: ''\n\n        };\n\n\n\n    }\n    fetchExpenses() {\n        if (this.props.loggedIn) {\n            apiClient.get('sanctum/csrf-cookie').then(() => apiClient.get('/api/expenses')\n                .then(response => {\n                    const expenses = response.data.data;\n                    this.setState({ expenses: expenses, filter: expenses });\n                })\n                .catch(error => console.error(error)\n                ))\n\n        }\n    }\n    componentDidMount = (props) => {\n        this.fetchExpenses();\n        this.getChart();\n        this.setState({ filter: this.state.expenses })\n\n    }\n\n    handleAddExpense = () => {\n\n        this.fetchExpenses();\n\n\n        this.getChart();\n    }\n    handleDeleteExpense = (id) => {\n        apiClient.get('/sanctum/csrf-cookie')\n            .then(response => {\n                apiClient.post('/api/deleteExpense', {\n                    id: id\n                }\n\n\n                )\n                const expenses = this.state.expenses.filter(item => item.id !== id);\n                const filter = this.state.filter.filter(item => item.id !== id);\n                this.setState({ expenses: expenses, filter: filter });\n            });\n        this.getChart();\n\n\n    }\n\n\n    getChart = () => {\n        if (this.props.loggedIn) {\n            apiClient.get('sanctum/csrf-cookie').then(() => apiClient.get('/api/chartData')\n                .then(response => {\n                    const data = response.data;\n                    this.setState({ data: data });\n                })\n                .catch(error => console.error(error)\n                ))\n\n        }\n    }\n    handleAmountSort = () => {\n        if (this.state.sort == '(a, b) => a.amount > b.amount ? 1 : -1') {\n            this.setState({ sort: (a, b) => a.amount > b.amount ? -1 : 1 });\n\n        }\n        else { this.setState({ sort: (a, b) => a.amount > b.amount ? 1 : -1 }); }\n    }\n    handleDateSort = () => {\n        if (this.state.sort == '(a, b) => a.date > b.date ? 1 : -1') {\n            this.setState({ sort: (a, b) => a.date > b.date ? -1 : 1 })\n        }\n        else { this.setState({ sort: (a, b) => a.date > b.date ? 1 : -1 }) }\n    }\n\n    filterCatId = categories => {\n        let expenses = this.state.expenses\n        if (categories == 0) { expenses = this.state.expenses } else {\n\n            expenses = this.state.expenses.filter(item => item.category_id == categories);\n\n\n        } this.setState({ filter: expenses })\n    }\n\n    changeFrom = (e) => {\n        const from = e.target.value;\n        this.setState({ fromDate: from })\n\n\n    }\n    changeTo = (e) => {\n        const to = e.target.value;\n        this.setState({ toDate: to })\n\n    }\n\n    changeDate = () => {\n\n        if (this.state.fromDate && this.state.toDate) {\n            const expenses = this.state.expenses.filter(item => item.date >= this.state.fromDate && item.date <= this.state.toDate);\n            this.setState({ filter: expenses });\n\n        }\n    }\n\n    resetExpenses = () => {\n\n        this.setState({ filter: this.state.expenses });\n        this.setState({ fromDate: '' });\n        this.setState({ toDate: '' })\n\n    }\n\n    render() {\n\n\n        if (this.props.loggedIn) {\n            return (\n                <>\n\n                    {/* <ExpensesForm onAddExpense={this.handleAddExpense} /> */}\n\n\n\n\n                    <div className=\"shadow p-3 mb-5 bg-light rounded split left\" >\n\n                        <h3>Filter By:</h3>\n                        <table>\n                            <thead>\n                                <tr align='center'>\n                                    <th>Category</th>\n                                    <th>From Date</th>\n                                    <th>To Date</th>\n                                </tr></thead>\n                            <tbody>\n                                <tr>\n                                    {/* <td text-align=\"center\"><Categories onChangeCatId={this.filterCatId} {...this.props} loggedIn={true} /></td> */}\n                                    <td><input className=\"form-control\" type=\"date\" onChange={this.changeFrom} value={this.state.fromDate}></input></td>\n\n                                    <td><input className=\"form-control\" type=\"date\" onChange={this.changeTo} value={this.state.toDate}></input></td>\n                                    <td><button className=\"btn btn-dark\" type=\"submit\" onClick={this.changeDate}>Filter</button></td>\n                                    <td><button className=\"btn btn-dark\" type=\"submit\" onClick={this.resetExpenses}>Reset</button></td>\n                                </tr></tbody></table>\n\n                        <div className=\"scroll\">\n                            <table className=\"table table-striped tableLeft\">\n                                <thead className='thead-dark'>\n                                    <tr>\n                                        <th>#</th>\n\n                                        <th onClick={this.handleAmountSort}>Amount</th>\n                                        <th>Category</th>\n                                        <th onClick={this.handleDateSort}>Date</th>\n                                        <th>Action</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"\">\n                                    {this.state.filter.sort(this.state.sort).map((expense) => {\n                                        return (\n                                            <tr key={expense.id}>\n                                                <td>{expense.id}</td>\n                                                <td >{expense.amount} $</td>\n                                                <td >{expense.category.name}</td>\n                                                <td >{expense.date}</td>\n\n                                                <td><Link to={{ pathname: `/editExpense`, state: { eid: expense.id } }}>\n                                                    <svg width=\"2em\" height=\"2em\" viewBox=\"0 0 16 16\" class=\"bi bi-pencil-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                        <path fill-rule=\"evenodd\" d=\"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z\" />\n                                                    </svg></Link><span>    </span>\n                                                    <svg width=\"2em\" height=\"2em\" viewBox=\"0 0 16 16\" className=\"bi bi-trash-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" onClick={(e) => { this.handleDeleteExpense(expense.id) }}>\n                                                        <path fillRule=\"evenodd\" d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\" />\n                                                    </svg>\n\n                                                </td>\n                                            </tr>);\n                                    })}\n                                </tbody></table></div>\n\n                    </div>\n\n                    <div className=\"shadow p-3 mb-5 bg-gradient-light rounded split right\" height=\"100%\">\n\n                        <PieChartComponent dataParentToChild={this.state.data} /></div></>\n\n\n\n            );\n        }\n        return (\n            <div className=\"alert alert-warning\">You are not logged in.</div>\n        );\n\n    }\n\n}\n\nexport default Expense;"]},"metadata":{},"sourceType":"module"}